<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¹´ë° - ìŠ¤ë§ˆíŠ¸ ëª¨ì„ ë¹„ì„œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'kakao-yellow': '#fef01b',
                        'kakao-bg': '#9bbbd4',
                        'kakao-text': '#556677',
                        'kakao-chat-bg': '#b2c7da'
                    },
                    fontFamily: {
                        'kakao': ['Apple SD Gothic Neo', 'Malgun Gothic', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            background: linear-gradient(to bottom, #b2c7da, #9bbbd4);
        }

        .message-bubble {
            max-width: 75%;
            word-wrap: break-word;
            animation: slideIn 0.3s ease-out;
            font-size: 14px;
            /* ì±„íŒ… ê¸€ì í¬ê¸° ì¤„ì„ */
        }

        .message-other {
            background: white;
            border-radius: 18px 18px 18px 4px;
        }

        .message-user {
            background: #fef01b;
            border-radius: 18px 18px 4px 18px;
            margin-left: auto;
        }

        .message-system {
            background: #f0f8ff;
            border: 1px solid #e0f0ff;
            border-radius: 12px;
            margin: 8px auto;
            max-width: 90%;
        }

        .appointment-card {
            background: white;
            border-radius: 16px;
            border: 1px solid #e0e0e0;
            margin: 8px 0;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .restaurant-card {
            background: white;
            border-radius: 16px;
            border: 1px solid #e0e0e0;
            margin: 8px 0;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }

        .restaurant-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .vote-card {
            background: white;
            border-radius: 16px;
            border: 1px solid #e0e0e0;
            margin: 8px 0;
            overflow: hidden;
        }

        .typing-indicator {
            animation: pulse 1.5s infinite;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .button-action {
            background: #ffffff;
            color: #556677;
            border: 1px solid #d1d5db;
            border-radius: 12px;
            padding: 12px 20px;
            margin: 8px auto;
            display: block;
            cursor: pointer;
            transition: all 0.2s ease-out;
            font-size: 14px;
            font-weight: 600;
            width: fit-content;
            min-width: 120px;
            text-align: center;
        }

        .button-action:hover {
            background: #f9fafb;
            transform: scale(0.98);
        }

        .button-primary {
            background: #fef01b;
            color: #556677;
            border: 1px solid #e6d600;
            box-shadow: 0 4px 12px rgba(254, 240, 27, 0.4);
        }

        .button-primary:hover {
            background: #e6d600;
            box-shadow: 0 6px 16px rgba(254, 240, 27, 0.5);
        }

        .button-small {
            padding: 8px 16px;
            font-size: 12px;
            min-width: 80px;
        }

        .progress-bar {
            height: 4px;
            background: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #fef01b;
            transition: width 0.3s ease;
        }

        .tag {
            display: inline-block;
            background: #f3f4f6;
            color: #556677;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin: 2px;
        }

        .tag-selected {
            background: #fef01b;
            color: #556677;
        }

        .star-rating {
            color: #fbbf24;
        }

        .restaurant-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            background: linear-gradient(45deg, #f3f4f6, #e5e7eb);
        }
    </style>
</head>

<body class="min-h-screen">
    <!-- ì¹´ì¹´ì˜¤í†¡ í—¤ë” -->
    <div class="bg-kakao-yellow shadow-sm">
        <div class="max-w-md mx-auto px-4 py-3 flex items-center">
            <button onclick="goBack()" class="mr-3 text-gray-700">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
                </svg>
            </button>
            <div class="flex items-center space-x-3 flex-1">
                <div
                    class="w-10 h-10 bg-gradient-to-br from-pink-400 to-purple-500 rounded-full flex items-center justify-center">
                    <span class="text-white text-lg">ğŸ¤–</span>
                </div>
                <div>
                    <h1 class="font-semibold text-gray-800">ì¹´ë°</h1>
                    <p class="text-xs text-gray-600" id="calming-status">ëª¨ì„ ê´€ë¦¬ ë¹„ì„œ</p>
                </div>
            </div>
            <div class="flex space-x-2">
                <button class="text-gray-700">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- ì±„íŒ… ì˜ì—­ -->
    <div class="max-w-md mx-auto bg-kakao-chat-bg min-h-screen">
        <div id="chat-container" class="p-4 space-y-3 pb-20">
            <!-- ë©”ì‹œì§€ë“¤ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </div>

        <!-- ì…ë ¥ ì˜ì—­ -->
        <div class="fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-md bg-white border-t p-3">
            <div class="flex items-center space-x-2">
                <button class="text-gray-500">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                    </svg>
                </button>
                <input id="message-input" type="text" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                    class="flex-1 px-3 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-kakao-yellow"
                    onkeypress="handleKeyPress(event)">
                <button onclick="sendMessage()"
                    class="bg-kakao-yellow text-gray-800 px-4 py-2 rounded-full font-medium hover:bg-yellow-500 transition-colors">
                    ì „ì†¡
                </button>
            </div>
        </div>
    </div>

    <script>
        let chatContainer = document.getElementById('chat-container');
        let messageInput = document.getElementById('message-input');
        let currentStep = 0;

        // ë©”ì‹œì§€ ì¶”ê°€ í•¨ìˆ˜
        function addMessage(content, isUser = false, hasButtons = false, buttons = [], isSystem = false) {
            const messageDiv = document.createElement('div');
            let className = `message-bubble p-3 mb-2`;

            if (isSystem) {
                className += ' message-system';
            } else if (isUser) {
                className += ' message-user ml-auto';
            } else {
                className += ' message-other';
            }

            messageDiv.className = className;

            let messageHTML = `<p class="text-sm ${isSystem ? 'text-blue-800 text-center' : 'text-gray-800'}">${content}</p>`;

            if (hasButtons && buttons.length > 0) {
                messageHTML += '<div class="mt-3 flex flex-col items-center space-y-2">';
                buttons.forEach(button => {
                    let buttonClass = 'button-action';
                    if (button.primary) buttonClass += ' button-primary';
                    if (button.small) buttonClass += ' button-small';

                    messageHTML += `<button onclick="${button.action}" class="${buttonClass}">${button.text}</button>`;
                });
                messageHTML += '</div>';
            }

            messageDiv.innerHTML = messageHTML;
            chatContainer.appendChild(messageDiv);
            scrollToBottom();
        }

        // ì‚¬ìš©ì í”„ë¡œí•„ ì¶”ê°€ (ì´ë¦„ê³¼ ì•„ë°”íƒ€)
        function addUserMessage(name, avatar, content, isMe = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex items-start space-x-2 mb-3 ${isMe ? 'flex-row-reverse space-x-reverse' : ''}`;

            const avatarColor = avatar === 'ë‹¨' ? 'bg-orange-400' :
                avatar === 'ì—°' ? 'bg-pink-400' :
                    avatar === 'ì½˜' ? 'bg-blue-400' : 'bg-gray-400';

            messageDiv.innerHTML = `
                <div class="w-8 h-8 ${avatarColor} rounded-full flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                    ${avatar}
                </div>
                <div class="${isMe ? 'items-end' : 'items-start'} flex flex-col">
                    <div class="text-xs text-gray-600 mb-1 ${isMe ? 'text-right' : ''}">${name}</div>
                    <div class="message-bubble ${isMe ? 'message-user' : 'message-other'} p-3">
                        <p class="text-sm text-gray-800">${content}</p>
                    </div>
                </div>
            `;

            chatContainer.appendChild(messageDiv);
            scrollToBottom();
        }

        // ì•½ì† ì •ë³´ ì¹´ë“œ ì¶”ê°€
        function addAppointmentCard() {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'appointment-card p-4 mb-2 max-w-xs';

            cardDiv.innerHTML = `
                <h4 class="font-semibold text-gray-800 mb-3 text-center">ğŸ“‹ ì•½ì† ê¸°ë³¸ ì •ë³´</h4>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                        <span class="text-gray-600">ì•½ì† ì œëª©:</span>
                        <span class="font-medium text-gray-800">ì €ë… ì•½ì†</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ì°¸ê°€ì:</span>
                        <span class="font-medium text-gray-800">ì½˜ì¹˜ì¦ˆ, ì—°ì–´í”¼ì¹˜, ë‹¨ë¬´ì§€</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ì•½ì† ì¥ì†Œ:</span>
                        <span class="font-medium text-gray-800">ê°•ë‚¨</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ì•½ì† ì‹œê°„:</span>
                        <span class="font-medium text-gray-800">ì˜¤í›„ 6ì‹œ</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ì¢…ë¥˜:</span>
                        <span class="font-medium text-gray-800">ì´ˆë°¥</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ë¶„ìœ„ê¸°:</span>
                        <span class="font-medium text-gray-800">ì¡°ìš©í•œ ê³³</span>
                    </div>
                </div>
                <div class="mt-4 flex space-x-2">
                    <button onclick="confirmAppointment()" class="button-action button-primary flex-1">ë„¤</button>
                    <button onclick="modifyAppointment()" class="button-action flex-1">ì•„ë‹ˆì˜¤, ìˆ˜ì •í•˜ê¸°</button>
                </div>
            `;

            chatContainer.appendChild(cardDiv);
            scrollToBottom();
        }

        // ê°œì¸ ì„ í˜¸ë„ ì…ë ¥ ì¹´ë“œ ì¶”ê°€
        function addPreferenceCard() {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'appointment-card p-4 mb-2 max-w-xs';

            cardDiv.innerHTML = `
                <h4 class="font-semibold text-gray-800 mb-3 text-center">ğŸ¯ ê°œì¸ ì„ í˜¸ë„ ì…ë ¥</h4>
                <div class="space-y-3">
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">ì¶œë°œì§€</label>
                        <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm" placeholder="ì¶œë°œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”" value="ì§‘">
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">ì„ í˜¸ êµí†µìˆ˜ë‹¨</label>
                        <div class="flex flex-wrap gap-1">
                            <span class="tag tag-selected">ğŸš‡ ëŒ€ì¤‘êµí†µ</span>
                            <span class="tag">ğŸš— ìê°€ìš©</span>
                            <span class="tag">ğŸš• íƒì‹œ</span>
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">ì˜ˆì‚° ë²”ìœ„</label>
                        <div class="flex flex-wrap gap-1">
                            <span class="tag">ğŸ’° 2ë§Œì›ëŒ€</span>
                            <span class="tag tag-selected">ğŸ’° 3ë§Œì›ëŒ€</span>
                            <span class="tag">ğŸ’° 4ë§Œì›+</span>
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">ì•½ì† 30ë¶„ ì „ ìœ„ì¹˜ ê³µìœ </label>
                        <div class="flex space-x-2">
                            <span class="tag tag-selected">âœ… ë™ì˜</span>
                            <span class="tag">âŒ ë¹„ë™ì˜</span>
                        </div>
                    </div>
                </div>
                <div class="mt-4">
                    <button onclick="submitPreferences()" class="button-action button-primary w-full">ì„ í˜¸ë„ ì œì¶œ</button>
                </div>
            `;

            chatContainer.appendChild(cardDiv);
            scrollToBottom();
        }

        // ì‹ë‹¹ ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ ì¶”ê°€
        function addRestaurantList() {
            const restaurants = [
                {
                    name: "ìŠ¤ì‹œ ì  ",
                    rating: "4.8",
                    reviews: "324",
                    status: "ì˜ì—…ì¤‘",
                    feature: "ì¡°ìš©í•œ ë£¸ì´ ìˆì–´ ëŒ€í™”í•˜ê¸° ì¢‹ì•„ìš”",
                    image: "ğŸ£"
                },
                {
                    name: "ì˜¤ë§ˆì¹´ì„¸ ê°•ë‚¨",
                    rating: "4.6",
                    reviews: "198",
                    status: "ì˜ì—…ì¤‘",
                    feature: "ì‹ ì„ í•œ ì¬ë£Œì™€ ì •í†µ ì¼ì‹ ë¶„ìœ„ê¸°",
                    image: "ğŸ±"
                },
                {
                    name: "ì´ˆë°¥ì™•",
                    rating: "4.4",
                    reviews: "267",
                    status: "ì˜ì—…ì¤‘",
                    feature: "í•©ë¦¬ì ì¸ ê°€ê²©ì˜ í€„ë¦¬í‹° ì´ˆë°¥",
                    image: "ğŸ¤"
                }
            ];

            restaurants.forEach((restaurant, index) => {
                const cardDiv = document.createElement('div');
                cardDiv.className = 'restaurant-card p-4 mb-3 max-w-xs';

                cardDiv.innerHTML = `
                    <div class="flex items-center space-x-3 mb-3">
                        <div class="w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-2xl">
                            ${restaurant.image}
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-gray-800">${restaurant.name}</h4>
                            <div class="flex items-center space-x-1 mt-1">
                                <span class="star-rating">â˜…â˜…â˜…â˜…â˜…</span>
                                <span class="text-sm text-gray-600">${restaurant.rating} (${restaurant.reviews})</span>
                            </div>
                            <div class="flex items-center space-x-2 mt-1">
                                <span class="tag" style="background: #dcfce7; color: #166534;">${restaurant.status}</span>
                                <button class="tag" style="background: #fef3c7; color: #92400e;">ì˜ˆì•½ ê°€ëŠ¥</button>
                            </div>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">${restaurant.feature}</p>
                    <button onclick="voteRestaurant('${restaurant.name}')" class="button-action button-primary w-full button-small">
                        ğŸ‘ íˆ¬í‘œí•˜ê¸°
                    </button>
                `;

                chatContainer.appendChild(cardDiv);
            });
            scrollToBottom();
        }

        // íˆ¬í‘œ í˜„í™© ì¹´ë“œ ì¶”ê°€
        function addVoteCard() {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'vote-card p-4 mb-2 max-w-xs';

            cardDiv.innerHTML = `
                <h4 class="font-semibold text-gray-800 mb-3 text-center">ğŸ—³ï¸ íˆ¬í‘œ í˜„í™©</h4>
                <div class="space-y-3">
                    <div class="border-l-4 border-green-400 pl-3">
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-medium text-gray-800">ìŠ¤ì‹œ ì  </span>
                            <span class="text-sm font-semibold text-green-600">2í‘œ</span>
                        </div>
                        <div class="progress-bar mb-1">
                            <div class="progress-fill" style="width: 67%;"></div>
                        </div>
                        <div class="text-xs text-gray-600">ì—°ì–´í”¼ì¹˜, ì½˜ì¹˜ì¦ˆ</div>
                    </div>
                    <div class="border-l-4 border-yellow-400 pl-3">
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-medium text-gray-800">ì˜¤ë§ˆì¹´ì„¸ ê°•ë‚¨</span>
                            <span class="text-sm font-semibold text-yellow-600">1í‘œ</span>
                        </div>
                        <div class="progress-bar mb-1">
                            <div class="progress-fill" style="width: 33%;"></div>
                        </div>
                        <div class="text-xs text-gray-600">ë‹¨ë¬´ì§€</div>
                    </div>
                    <div class="border-l-4 border-gray-300 pl-3">
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-medium text-gray-800">ì´ˆë°¥ì™•</span>
                            <span class="text-sm font-semibold text-gray-600">0í‘œ</span>
                        </div>
                        <div class="progress-bar mb-1">
                            <div class="progress-fill" style="width: 0%;"></div>
                        </div>
                    </div>
                </div>
                <div class="mt-4 text-center">
                    <button onclick="finalizeAppointment()" class="button-action button-primary">ì•½ì† í™•ì •í•˜ê¸°</button>
                </div>
            `;

            chatContainer.appendChild(cardDiv);
            scrollToBottom();
        }

        // ìµœì¢… ì•½ì† í™•ì • ì¹´ë“œ ì¶”ê°€
        function addFinalCard() {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'appointment-card p-4 mb-2 max-w-xs';
            cardDiv.style.border = '2px solid #fef01b';

            cardDiv.innerHTML = `
                <div class="text-center mb-4">
                    <div class="text-4xl mb-2">ğŸ‰</div>
                    <h4 class="font-bold text-lg text-gray-800">ì•½ì†ì´ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤!</h4>
                </div>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                        <span class="text-gray-600">ì¥ì†Œ:</span>
                        <span class="font-medium text-gray-800">ìŠ¤ì‹œ ì  </span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ë‚ ì§œ:</span>
                        <span class="font-medium text-gray-800">ì˜¤ëŠ˜</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ì‹œê°„:</span>
                        <span class="font-medium text-gray-800">ì˜¤í›„ 6ì‹œ</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ì£¼ì†Œ:</span>
                        <span class="font-medium text-gray-800 text-xs">ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ê°•ë‚¨ëŒ€ë¡œ 123</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ì°¸ì—¬ì:</span>
                        <span class="font-medium text-gray-800">3ëª…</span>
                    </div>
                </div>
                <div class="mt-4 space-y-2">
                    <button onclick="openKakaoMap()" class="button-action button-primary w-full button-small">ğŸ—ºï¸ ê¸¸ì°¾ê¸°</button>
                    <button onclick="goToCheckin()" class="button-action w-full button-small">ğŸ“… ì•½ì† D-Day ì²´í—˜</button>
                </div>
            `;

            chatContainer.appendChild(cardDiv);
            scrollToBottom();
        }

        // íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„°
        function showTyping() {
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'message-bubble message-other p-3 mb-2 typing-indicator';
            typingDiv.innerHTML = '<p class="text-sm text-gray-600">ì¹´ë°ì´ ì…ë ¥ ì¤‘...</p>';
            chatContainer.appendChild(typingDiv);
            scrollToBottom();
        }

        function hideTyping() {
            const typing = document.getElementById('typing-indicator');
            if (typing) typing.remove();
        }

        // ìŠ¤í¬ë¡¤ í•˜ë‹¨ìœ¼ë¡œ
        function scrollToBottom() {
            setTimeout(() => {
                window.scrollTo(0, document.body.scrollHeight);
            }, 100);
        }

        // í‚¤ ì…ë ¥ ì²˜ë¦¬
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // ë©”ì‹œì§€ ì „ì†¡
        function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            addMessage(message, true);
            messageInput.value = '';
        }

        // ì•½ì† í—ˆë¸Œ ë§Œë“¤ê¸°
        function createAppointmentHub() {
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('ëŒ€í™”ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì•½ì† í—ˆë¸Œë¥¼ ë§Œë“¤ê³  ìˆì–´ìš”! ğŸ“‹<br><br>ì¶”ì¶œëœ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”:');

                setTimeout(() => {
                    addAppointmentCard();
                }, 1000);
            }, 2000);
        }

        // ì•½ì† ì •ë³´ í™•ì¸
        function confirmAppointment() {
            addMessage('ë„¤', true);

            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addMessage('ì¢‹ì•„ìš”! ì´ì œ ê°œì¸ ì„ í˜¸ë„ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”. ë” ì •í™•í•œ ì¶”ì²œì„ ìœ„í•´ í•„ìš”í•´ìš”! ğŸ˜Š');

                    setTimeout(() => {
                        addPreferenceCard();
                    }, 1000);
                }, 1500);
            }, 500);
        }

        // ì•½ì† ì •ë³´ ìˆ˜ì •
        function modifyAppointment() {
            addMessage('ì•„ë‹ˆì˜¤, ìˆ˜ì •í•˜ê¸°', true);

            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addMessage('ì–´ë–¤ ì •ë³´ë¥¼ ìˆ˜ì •í• ê¹Œìš”?', false, true, [
                        { text: 'ğŸ“ ì•½ì† ì¥ì†Œ', action: 'modifyLocation()', primary: false, small: true },
                        { text: 'â° ì‹œê°„', action: 'modifyTime()', primary: false, small: true },
                        { text: 'ğŸ½ï¸ ë©”ë‰´', action: 'modifyMenu()', primary: false, small: true }
                    ]);
                }, 1500);
            }, 500);
        }

        // ì„ í˜¸ë„ ì œì¶œ
        function submitPreferences() {
            addMessage('ì„ í˜¸ë„ ì œì¶œ ì™„ë£Œ!', true);

            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addMessage('ëŒ€í™”ì™€ ê°œì¸ ì„ í˜¸ë„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ AI ë§›ì§‘ì„ ì¶”ì²œí•´ë“œë¦´ê²Œìš”. íˆ¬í‘œí•´ì£¼ì„¸ìš”! ğŸ¤–âœ¨');

                    setTimeout(() => {
                        addRestaurantList();
                    }, 1000);
                }, 2000);
            }, 500);
        }

        // ì‹ë‹¹ íˆ¬í‘œ
        function voteRestaurant(restaurantName) {
            addMessage(`${restaurantName}ì— íˆ¬í‘œí–ˆìŠµë‹ˆë‹¤!`, true);

            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addMessage('íˆ¬í‘œê°€ ì™„ë£Œë˜ì—ˆì–´ìš”! ë‹¤ë¥¸ ì°¸ì—¬ìë“¤ì˜ íˆ¬í‘œ í˜„í™©ì„ í™•ì¸í•´ë³´ì„¸ìš” ğŸ“Š');

                    setTimeout(() => {
                        addVoteCard();
                    }, 1000);
                }, 1500);
            }, 500);
        }

        // ì•½ì† í™•ì •
        function finalizeAppointment() {
            addMessage('ì•½ì† í™•ì •í•˜ê¸°', true);

            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addMessage('ğŸ‰ ì¶•í•˜í•´ìš”! ì•½ì†ì´ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤!<br><br>ëª¨ë“  ì°¸ì—¬ìì—ê²Œ ì•Œë¦¼ì„ ë³´ë‚´ë“œë ¸ì–´ìš” ğŸ“±');

                    setTimeout(() => {
                        addFinalCard();
                    }, 1000);
                }, 2000);
            }, 500);
        }

        // ê¸°íƒ€ í•¨ìˆ˜ë“¤
        function modifyLocation() {
            addMessage('ì•½ì† ì¥ì†Œ ìˆ˜ì •', true);
            addMessage('ì£„ì†¡í•´ìš”, ì´ ê¸°ëŠ¥ì€ ë°ëª¨ì—ì„œëŠ” ì§€ì›í•˜ì§€ ì•Šì•„ìš” ğŸ˜…');
        }

        function modifyTime() {
            addMessage('ì‹œê°„ ìˆ˜ì •', true);
            addMessage('ì£„ì†¡í•´ìš”, ì´ ê¸°ëŠ¥ì€ ë°ëª¨ì—ì„œëŠ” ì§€ì›í•˜ì§€ ì•Šì•„ìš” ğŸ˜…');
        }

        function modifyMenu() {
            addMessage('ë©”ë‰´ ìˆ˜ì •', true);
            addMessage('ì£„ì†¡í•´ìš”, ì´ ê¸°ëŠ¥ì€ ë°ëª¨ì—ì„œëŠ” ì§€ì›í•˜ì§€ ì•Šì•„ìš” ğŸ˜…');
        }

        function openKakaoMap() {
            window.open('https://map.kakao.com/', '_blank');
        }

        function goToCheckin() {
            window.location.href = 'new_checkin.html';
        }

        function goBack() {
            window.location.href = 'index.html';
        }

        // ì´ˆê¸° ëŒ€í™” ì‹œì‘
        setTimeout(() => {
            addUserMessage('ë‹¨ë¬´ì§€', 'ë‹¨', 'ì˜¤ëŠ˜ ì €ë… ê°•ë‚¨ì—ì„œ ë§Œë‚ ê¹Œìš”?');

            setTimeout(() => {
                addUserMessage('ì½˜ì¹˜ì¦ˆ', 'ì½˜', 'ë„¤, ì¢‹ì•„ìš” 6ì‹œ ì´ˆë°¥ ì–´ë– ì„¸ìš”?', true);

                setTimeout(() => {
                    addUserMessage('ì—°ì–´í”¼ì¹˜', 'ì—°', 'ì´ˆë°¥ ì¢‹ì•„ìš”! ì¸ë‹¹ í•œ 3ë§Œì›ì •ë„ë©´ ì ë‹¹í• ê¹Œìš”? ê·¸ë¦¬ê³ , ì˜¤ëœë§Œì— ë³´ëŠ”ê±°ë‹ˆ ì¡°ìš©í•œ ê³³ì—ì„œ ë´ìœ ');

                    setTimeout(() => {
                        addUserMessage('ì½˜ì¹˜ì¦ˆ', 'ì½˜', 'ğŸ‘', true);

                        setTimeout(() => {
                            addUserMessage('ë‹¨ë¬´ì§€', 'ë‹¨', 'ë„¤, @ì¹´ë° ì•½ì† ì •ë¦¬ ì¢€ ë„ì™€ì¤„ë˜?');

                            setTimeout(() => {
                                addMessage('ì•ˆë…•í•˜ì„¸ìš”! ëŒ€í™”ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì•½ì† í—ˆë¸Œë¥¼ ë§Œë“¤ì–´ë“œë¦´ê²Œìš” ğŸ¯<br><br>ì°¸ì—¬ìë“¤ì˜ ì„ í˜¸ë„ë¥¼ ìˆ˜ì§‘í•´ì„œ ìµœì ì˜ ì¥ì†Œë¥¼ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤!', false, true, [
                                    { text: 'ğŸš€ ì•½ì† í—ˆë¸Œ ë§Œë“¤ê¸°', action: 'createAppointmentHub()', primary: true }
                                ]);
                            }, 1000);
                        }, 1000);
                    }, 1500);
                }, 2000);
            }, 1500);
        }, 1000);
    </script>
</body>

</html>
