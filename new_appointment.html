<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïπ¥Î∞ç - Ïä§ÎßàÌä∏ Î™®ÏûÑ ÎπÑÏÑú</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'kakao-yellow': '#fef01b',
                        'kakao-bg': '#9bbbd4',
                        'kakao-text': '#556677',
                        'kakao-chat-bg': '#b2c7da'
                    },
                    fontFamily: {
                        'kakao': ['Apple SD Gothic Neo', 'Malgun Gothic', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            background: linear-gradient(to bottom, #b2c7da, #9bbbd4);
        }

        .message-bubble {
            max-width: 75%;
            word-wrap: break-word;
            animation: slideIn 0.3s ease-out;
            font-size: 14px;
            /* Ï±ÑÌåÖ Í∏ÄÏûê ÌÅ¨Í∏∞ Ï§ÑÏûÑ */
        }

        .message-other {
            background: white;
            border-radius: 18px 18px 18px 4px;
        }

        .message-user {
            background: #fef01b;
            border-radius: 18px 18px 4px 18px;
            margin-left: auto;
        }

        .message-system {
            background: #f0f8ff;
            border: 1px solid #e0f0ff;
            border-radius: 12px;
            margin: 8px auto;
            max-width: 90%;
        }

        .appointment-card {
            background: white;
            border-radius: 16px;
            border: 1px solid #e0e0e0;
            margin: 8px 0;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .restaurant-card {
            background: white;
            border-radius: 16px;
            border: 1px solid #e0e0e0;
            margin: 8px 0;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }

        .restaurant-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .vote-card {
            background: white;
            border-radius: 16px;
            border: 1px solid #e0e0e0;
            margin: 8px 0;
            overflow: hidden;
        }

        .typing-indicator {
            animation: pulse 1.5s infinite;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .button-action {
            background: #ffffff;
            color: #556677;
            border: 1px solid #d1d5db;
            border-radius: 12px;
            padding: 12px 20px;
            margin: 8px auto;
            display: block;
            cursor: pointer;
            transition: all 0.2s ease-out;
            font-size: 14px;
            font-weight: 600;
            width: fit-content;
            min-width: 120px;
            text-align: center;
        }

        .button-action:hover {
            background: #f9fafb;
            transform: scale(0.98);
        }

        .button-primary {
            background: #fef01b;
            color: #556677;
            border: 1px solid #e6d600;
            box-shadow: 0 4px 12px rgba(254, 240, 27, 0.4);
        }

        .button-primary:hover {
            background: #e6d600;
            box-shadow: 0 6px 16px rgba(254, 240, 27, 0.5);
        }

        .button-small {
            padding: 8px 16px;
            font-size: 12px;
            min-width: 80px;
        }

        .progress-bar {
            height: 4px;
            background: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #fef01b;
            transition: width 0.3s ease;
        }

        .tag {
            display: inline-block;
            background: #f3f4f6;
            color: #556677;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin: 2px;
        }

        .tag-selected {
            background: #fef01b;
            color: #556677;
        }

        .star-rating {
            color: #fbbf24;
        }

        .restaurant-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            background: linear-gradient(45deg, #f3f4f6, #e5e7eb);
        }
    </style>
</head>

<body class="min-h-screen">
    <!-- Ïπ¥Ïπ¥Ïò§ÌÜ° Ìó§Îçî -->
    <div class="bg-kakao-yellow shadow-sm">
        <div class="max-w-md mx-auto px-4 py-3 flex items-center">
            <button onclick="goBack()" class="mr-3 text-gray-700">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
                </svg>
            </button>
            <div class="flex items-center space-x-3 flex-1">
                <div
                    class="w-10 h-10 bg-gradient-to-br from-pink-400 to-purple-500 rounded-full flex items-center justify-center">
                    <span class="text-white text-lg">ü§ñ</span>
                </div>
                <div>
                    <h1 class="font-semibold text-gray-800">Ïπ¥Î∞ç</h1>
                    <p class="text-xs text-gray-600" id="calming-status">Î™®ÏûÑ Í¥ÄÎ¶¨ ÎπÑÏÑú</p>
                </div>
            </div>
            <div class="flex space-x-2">
                <button class="text-gray-700">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Ï±ÑÌåÖ ÏòÅÏó≠ -->
    <div class="max-w-md mx-auto bg-kakao-chat-bg min-h-screen">
        <div id="chat-container" class="p-4 space-y-3 pb-20">
            <!-- Î©îÏãúÏßÄÎì§Ïù¥ Ïó¨Í∏∞Ïóê Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
        </div>

        <!-- ÏûÖÎ†• ÏòÅÏó≠ -->
        <div class="fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-md bg-white border-t p-3">
            <div class="flex items-center space-x-2">
                <button class="text-gray-500">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                    </svg>
                </button>
                <input id="message-input" type="text" placeholder="Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî"
                    class="flex-1 px-3 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-kakao-yellow"
                    onkeypress="handleKeyPress(event)">
                <button onclick="sendMessage()"
                    class="bg-kakao-yellow text-gray-800 px-4 py-2 rounded-full font-medium hover:bg-yellow-500 transition-colors">
                    Ï†ÑÏÜ°
                </button>
            </div>
        </div>
    </div>

    <script>
        let chatContainer = document.getElementById('chat-container');
        let messageInput = document.getElementById('message-input');
        let currentStep = 0;

        // Î©îÏãúÏßÄ Ï∂îÍ∞Ä Ìï®Ïàò
        function addMessage(content, isUser = false, hasButtons = false, buttons = [], isSystem = false) {
            const messageDiv = document.createElement('div');
            let className = `message-bubble p-3 mb-2`;

            if (isSystem) {
                className += ' message-system';
            } else if (isUser) {
                className += ' message-user ml-auto';
            } else {
                className += ' message-other';
            }

            messageDiv.className = className;

            let messageHTML = `<p class="text-sm ${isSystem ? 'text-blue-800 text-center' : 'text-gray-800'}">${content}</p>`;

            if (hasButtons && buttons.length > 0) {
                messageHTML += '<div class="mt-3 flex flex-col items-center space-y-2">';
                buttons.forEach(button => {
                    let buttonClass = 'button-action';
                    if (button.primary) buttonClass += ' button-primary';
                    if (button.small) buttonClass += ' button-small';

                    messageHTML += `<button onclick="${button.action}" class="${buttonClass}">${button.text}</button>`;
                });
                messageHTML += '</div>';
            }

            messageDiv.innerHTML = messageHTML;
            chatContainer.appendChild(messageDiv);
            scrollToBottom();
        }

        // ÏÇ¨Ïö©Ïûê ÌîÑÎ°úÌïÑ Ï∂îÍ∞Ä (Ïù¥Î¶ÑÍ≥º ÏïÑÎ∞îÌÉÄ)
        function addUserMessage(name, avatar, content, isMe = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex items-start space-x-2 mb-3 ${isMe ? 'flex-row-reverse space-x-reverse' : ''}`;

            const avatarColor = avatar === 'Îã®' ? 'bg-orange-400' :
                avatar === 'Ïó∞' ? 'bg-pink-400' :
                    avatar === 'ÏΩò' ? 'bg-blue-400' : 'bg-gray-400';

            messageDiv.innerHTML = `
                <div class="w-8 h-8 ${avatarColor} rounded-full flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                    ${avatar}
                </div>
                <div class="${isMe ? 'items-end' : 'items-start'} flex flex-col">
                    <div class="text-xs text-gray-600 mb-1 ${isMe ? 'text-right' : ''}">${name}</div>
                    <div class="message-bubble ${isMe ? 'message-user' : 'message-other'} p-3">
                        <p class="text-sm text-gray-800">${content}</p>
                    </div>
                </div>
            `;

            chatContainer.appendChild(messageDiv);
            scrollToBottom();
        }

        // ÏïΩÏÜç Ï†ïÎ≥¥ Ïπ¥Îìú Ï∂îÍ∞Ä
        function addAppointmentCard() {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'appointment-card p-4 mb-2 max-w-xs';

            cardDiv.innerHTML = `
                <h4 class="font-semibold text-gray-800 mb-3 text-center">üìã ÏïΩÏÜç Í∏∞Î≥∏ Ï†ïÎ≥¥</h4>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                        <span class="text-gray-600">ÏïΩÏÜç Ï†úÎ™©:</span>
                        <span class="font-medium text-gray-800">Ï†ÄÎÖÅ ÏïΩÏÜç</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ï∞∏Í∞ÄÏûê:</span>
                        <span class="font-medium text-gray-800">ÏΩòÏπòÏ¶à, Ïó∞Ïñ¥ÌîºÏπò, Îã®Î¨¥ÏßÄ</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ÏïΩÏÜç Ïû•ÏÜå:</span>
                        <span class="font-medium text-gray-800">Í∞ïÎÇ®</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ÏïΩÏÜç ÏãúÍ∞Ñ:</span>
                        <span class="font-medium text-gray-800">Ïò§ÌõÑ 6Ïãú</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ï¢ÖÎ•ò:</span>
                        <span class="font-medium text-gray-800">Ï¥àÎ∞•</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Î∂ÑÏúÑÍ∏∞:</span>
                        <span class="font-medium text-gray-800">Ï°∞Ïö©Ìïú Í≥≥</span>
                    </div>
                </div>
                <div class="mt-4 flex space-x-2">
                    <button onclick="confirmAppointment()" class="button-action button-primary flex-1">ÎÑ§</button>
                    <button onclick="modifyAppointment()" class="button-action flex-1">ÏïÑÎãàÏò§, ÏàòÏ†ïÌïòÍ∏∞</button>
                </div>
            `;

            chatContainer.appendChild(cardDiv);
            scrollToBottom();
        }

        // Í∞úÏù∏ ÏÑ†Ìò∏ÎèÑ ÏûÖÎ†• Ïπ¥Îìú Ï∂îÍ∞Ä
        function addPreferenceCard() {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'appointment-card p-4 mb-2 max-w-xs';

            cardDiv.innerHTML = `
                <h4 class="font-semibold text-gray-800 mb-3 text-center">üéØ Í∞úÏù∏ ÏÑ†Ìò∏ÎèÑ ÏûÖÎ†•</h4>
                <div class="space-y-3">
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">Ï∂úÎ∞úÏßÄ</label>
                        <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm" placeholder="Ï∂úÎ∞úÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" value="Ïßë">
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">ÏÑ†Ìò∏ ÍµêÌÜµÏàòÎã®</label>
                        <div class="flex flex-wrap gap-1">
                            <span class="tag tag-selected">üöá ÎåÄÏ§ëÍµêÌÜµ</span>
                            <span class="tag">üöó ÏûêÍ∞ÄÏö©</span>
                            <span class="tag">üöï ÌÉùÏãú</span>
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">ÏòàÏÇ∞ Î≤îÏúÑ</label>
                        <div class="flex flex-wrap gap-1">
                            <span class="tag">üí∞ 2ÎßåÏõêÎåÄ</span>
                            <span class="tag tag-selected">üí∞ 3ÎßåÏõêÎåÄ</span>
                            <span class="tag">üí∞ 4ÎßåÏõê+</span>
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">ÏïΩÏÜç 30Î∂Ñ Ï†Ñ ÏúÑÏπò Í≥µÏú†</label>
                        <div class="flex space-x-2">
                            <span class="tag tag-selected">‚úÖ ÎèôÏùò</span>
                            <span class="tag">‚ùå ÎπÑÎèôÏùò</span>
                        </div>
                    </div>
                </div>
                <div class="mt-4">
                    <button onclick="submitPreferences()" class="button-action button-primary w-full">ÏÑ†Ìò∏ÎèÑ Ï†úÏ∂ú</button>
                </div>
            `;

            chatContainer.appendChild(cardDiv);
            scrollToBottom();
        }

        // ÏãùÎãπ Ï∂îÏ≤ú Î¶¨Ïä§Ìä∏ Ï∂îÍ∞Ä
        function addRestaurantList() {
            const restaurants = [
                {
                    name: "Ïä§Ïãú Ï††",
                    rating: "4.8",
                    reviews: "324",
                    status: "ÏòÅÏóÖÏ§ë",
                    feature: "Ï°∞Ïö©Ìïú Î£∏Ïù¥ ÏûàÏñ¥ ÎåÄÌôîÌïòÍ∏∞ Ï¢ãÏïÑÏöî",
                    image: "üç£"
                },
                {
                    name: "Ïò§ÎßàÏπ¥ÏÑ∏ Í∞ïÎÇ®",
                    rating: "4.6",
                    reviews: "198",
                    status: "ÏòÅÏóÖÏ§ë",
                    feature: "Ïã†ÏÑ†Ìïú Ïû¨Î£åÏôÄ Ï†ïÌÜµ ÏùºÏãù Î∂ÑÏúÑÍ∏∞",
                    image: "üç±"
                },
                {
                    name: "Ï¥àÎ∞•Ïôï",
                    rating: "4.4",
                    reviews: "267",
                    status: "ÏòÅÏóÖÏ§ë",
                    feature: "Ìï©Î¶¨Ï†ÅÏù∏ Í∞ÄÍ≤©Ïùò ÌÄÑÎ¶¨Ìã∞ Ï¥àÎ∞•",
                    image: "üç§"
                }
            ];

            restaurants.forEach((restaurant, index) => {
                const cardDiv = document.createElement('div');
                cardDiv.className = 'restaurant-card p-4 mb-3 max-w-xs';

                cardDiv.innerHTML = `
                    <div class="flex items-center space-x-3 mb-3">
                        <div class="w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-2xl">
                            ${restaurant.image}
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-gray-800">${restaurant.name}</h4>
                            <div class="flex items-center space-x-1 mt-1">
                                <span class="star-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                <span class="text-sm text-gray-600">${restaurant.rating} (${restaurant.reviews})</span>
                            </div>
                            <div class="flex items-center space-x-2 mt-1">
                                <span class="tag" style="background: #dcfce7; color: #166534;">${restaurant.status}</span>
                                <button class="tag" style="background: #fef3c7; color: #92400e;">ÏòàÏïΩ Í∞ÄÎä•</button>
                            </div>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">${restaurant.feature}</p>
                    <button onclick="voteRestaurant('${restaurant.name}')" class="button-action button-primary w-full button-small">
                        üëç Ìà¨ÌëúÌïòÍ∏∞
                    </button>
                `;

                chatContainer.appendChild(cardDiv);
            });
            scrollToBottom();
        }

        // Ìà¨Ìëú ÌòÑÌô© Ïπ¥Îìú Ï∂îÍ∞Ä
        function addVoteCard() {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'vote-card p-4 mb-2 max-w-xs';

            cardDiv.innerHTML = `
                <h4 class="font-semibold text-gray-800 mb-3 text-center">üó≥Ô∏è Ìà¨Ìëú ÌòÑÌô©</h4>
                <div class="space-y-3">
                    <div class="border-l-4 border-green-400 pl-3">
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-medium text-gray-800">Ïä§Ïãú Ï††</span>
                            <span class="text-sm font-semibold text-green-600">2Ìëú</span>
                        </div>
                        <div class="progress-bar mb-1">
                            <div class="progress-fill" style="width: 67%;"></div>
                        </div>
                        <div class="text-xs text-gray-600">Ïó∞Ïñ¥ÌîºÏπò, ÏΩòÏπòÏ¶à</div>
                    </div>
                    <div class="border-l-4 border-yellow-400 pl-3">
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-medium text-gray-800">Ïò§ÎßàÏπ¥ÏÑ∏ Í∞ïÎÇ®</span>
                            <span class="text-sm font-semibold text-yellow-600">1Ìëú</span>
                        </div>
                        <div class="progress-bar mb-1">
                            <div class="progress-fill" style="width: 33%;"></div>
                        </div>
                        <div class="text-xs text-gray-600">Îã®Î¨¥ÏßÄ</div>
                    </div>
                    <div class="border-l-4 border-gray-300 pl-3">
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-medium text-gray-800">Ï¥àÎ∞•Ïôï</span>
                            <span class="text-sm font-semibold text-gray-600">0Ìëú</span>
                        </div>
                        <div class="progress-bar mb-1">
                            <div class="progress-fill" style="width: 0%;"></div>
                        </div>
                    </div>
                </div>
                <div class="mt-4 text-center">
                    <button onclick="finalizeAppointment()" class="button-action button-primary">ÏïΩÏÜç ÌôïÏ†ïÌïòÍ∏∞</button>
                </div>
            `;

            chatContainer.appendChild(cardDiv);
            scrollToBottom();
        }

        // ÏµúÏ¢Ö ÏïΩÏÜç ÌôïÏ†ï Ïπ¥Îìú Ï∂îÍ∞Ä
        function addFinalCard() {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'appointment-card p-4 mb-2 max-w-xs';
            cardDiv.style.border = '2px solid #fef01b';

            cardDiv.innerHTML = `
                <div class="text-center mb-4">
                    <div class="text-4xl mb-2">üéâ</div>
                    <h4 class="font-bold text-lg text-gray-800">ÏïΩÏÜçÏù¥ ÌôïÏ†ïÎêòÏóàÏäµÎãàÎã§!</h4>
                </div>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ïû•ÏÜå:</span>
                        <span class="font-medium text-gray-800">Ïä§Ïãú Ï††</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ÎÇ†Ïßú:</span>
                        <span class="font-medium text-gray-800">Ïò§Îäò</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ÏãúÍ∞Ñ:</span>
                        <span class="font-medium text-gray-800">Ïò§ÌõÑ 6Ïãú</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ï£ºÏÜå:</span>
                        <span class="font-medium text-gray-800 text-xs">ÏÑúÏö∏Ïãú Í∞ïÎÇ®Íµ¨ Í∞ïÎÇ®ÎåÄÎ°ú 123</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ï∞∏Ïó¨Ïûê:</span>
                        <span class="font-medium text-gray-800">3Î™Ö</span>
                    </div>
                </div>
                <div class="mt-4 space-y-2">
                    <button onclick="openKakaoMap()" class="button-action button-primary w-full button-small">üó∫Ô∏è Í∏∏Ï∞æÍ∏∞</button>
                    <button onclick="goToCheckin()" class="button-action w-full button-small">üìÖ ÏïΩÏÜç D-Day Ï≤¥Ìóò</button>
                </div>
            `;

            chatContainer.appendChild(cardDiv);
            scrollToBottom();
        }

        // ÌÉÄÏù¥Ìïë Ïù∏ÎîîÏºÄÏù¥ÌÑ∞
        function showTyping() {
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'message-bubble message-other p-3 mb-2 typing-indicator';
            typingDiv.innerHTML = '<p class="text-sm text-gray-600">Ïπ¥Î∞çÏù¥ ÏûÖÎ†• Ï§ë...</p>';
            chatContainer.appendChild(typingDiv);
            scrollToBottom();
        }

        function hideTyping() {
            const typing = document.getElementById('typing-indicator');
            if (typing) typing.remove();
        }

        // Ïä§ÌÅ¨Î°§ ÌïòÎã®ÏúºÎ°ú
        function scrollToBottom() {
            setTimeout(() => {
                window.scrollTo(0, document.body.scrollHeight);
            }, 100);
        }

        // ÌÇ§ ÏûÖÎ†• Ï≤òÎ¶¨
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Î©îÏãúÏßÄ Ï†ÑÏÜ°
        function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            addMessage(message, true);
            messageInput.value = '';
        }

        // ÏïΩÏÜç ÌóàÎ∏å ÎßåÎì§Í∏∞
        function createAppointmentHub() {
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('ÎåÄÌôîÎ•º Í∏∞Î∞òÏúºÎ°ú ÏïΩÏÜç ÌóàÎ∏åÎ•º ÎßåÎì§Í≥† ÏûàÏñ¥Ïöî! üìã<br><br>Ï∂îÏ∂úÎêú Ï†ïÎ≥¥Î•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî:');

                setTimeout(() => {
                    addAppointmentCard();
                }, 1000);
            }, 2000);
        }

        // ÏïΩÏÜç Ï†ïÎ≥¥ ÌôïÏù∏
        function confirmAppointment() {
            addMessage('ÎÑ§', true);

            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addMessage('Ï¢ãÏïÑÏöî! Ïù¥Ï†ú Í∞úÏù∏ ÏÑ†Ìò∏ÎèÑÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî. Îçî Ï†ïÌôïÌïú Ï∂îÏ≤úÏùÑ ÏúÑÌï¥ ÌïÑÏöîÌï¥Ïöî! üòä');

                    setTimeout(() => {
                        addPreferenceCard();
                    }, 1000);
                }, 1500);
            }, 500);
        }

        // ÏïΩÏÜç Ï†ïÎ≥¥ ÏàòÏ†ï
        function modifyAppointment() {
            addMessage('ÏïÑÎãàÏò§, ÏàòÏ†ïÌïòÍ∏∞', true);

            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addMessage('Ïñ¥Îñ§ Ï†ïÎ≥¥Î•º ÏàòÏ†ïÌï†ÍπåÏöî?', false, true, [
                        { text: 'üìç ÏïΩÏÜç Ïû•ÏÜå', action: 'modifyLocation()', primary: false, small: true },
                        { text: '‚è∞ ÏãúÍ∞Ñ', action: 'modifyTime()', primary: false, small: true },
                        { text: 'üçΩÔ∏è Î©îÎâ¥', action: 'modifyMenu()', primary: false, small: true }
                    ]);
                }, 1500);
            }, 500);
        }

        // ÏÑ†Ìò∏ÎèÑ Ï†úÏ∂ú
        function submitPreferences() {
            addMessage('ÏÑ†Ìò∏ÎèÑ Ï†úÏ∂ú ÏôÑÎ£å!', true);

            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addMessage('ÎåÄÌôîÏôÄ Í∞úÏù∏ ÏÑ†Ìò∏ÎèÑÎ•º Í∏∞Î∞òÏúºÎ°ú AI ÎßõÏßëÏùÑ Ï∂îÏ≤úÌï¥ÎìúÎ¶¥Í≤åÏöî. Ìà¨ÌëúÌï¥Ï£ºÏÑ∏Ïöî! ü§ñ‚ú®');

                    setTimeout(() => {
                        addRestaurantList();
                    }, 1000);
                }, 2000);
            }, 500);
        }

        // ÏãùÎãπ Ìà¨Ìëú
        function voteRestaurant(restaurantName) {
            addMessage(`${restaurantName}Ïóê Ìà¨ÌëúÌñàÏäµÎãàÎã§!`, true);

            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addMessage('Ìà¨ÌëúÍ∞Ä ÏôÑÎ£åÎêòÏóàÏñ¥Ïöî! Îã§Î•∏ Ï∞∏Ïó¨ÏûêÎì§Ïùò Ìà¨Ìëú ÌòÑÌô©ÏùÑ ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî üìä');

                    setTimeout(() => {
                        addVoteCard();
                    }, 1000);
                }, 1500);
            }, 500);
        }

        // ÏïΩÏÜç ÌôïÏ†ï
        function finalizeAppointment() {
            addMessage('ÏïΩÏÜç ÌôïÏ†ïÌïòÍ∏∞', true);

            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addMessage('üéâ Ï∂ïÌïòÌï¥Ïöî! ÏïΩÏÜçÏù¥ ÌôïÏ†ïÎêòÏóàÏäµÎãàÎã§!<br><br>Î™®Îì† Ï∞∏Ïó¨ÏûêÏóêÍ≤å ÏïåÎ¶ºÏùÑ Î≥¥ÎÇ¥ÎìúÎ†∏Ïñ¥Ïöî üì±');

                    setTimeout(() => {
                        addFinalCard();
                    }, 1000);
                }, 2000);
            }, 500);
        }

        // Í∏∞ÌÉÄ Ìï®ÏàòÎì§
        function modifyLocation() {
            addMessage('ÏïΩÏÜç Ïû•ÏÜå ÏàòÏ†ï', true);
            addMessage('Ï£ÑÏÜ°Ìï¥Ïöî, Ïù¥ Í∏∞Îä•ÏùÄ Îç∞Î™®ÏóêÏÑúÎäî ÏßÄÏõêÌïòÏßÄ ÏïäÏïÑÏöî üòÖ');
        }

        function modifyTime() {
            addMessage('ÏãúÍ∞Ñ ÏàòÏ†ï', true);
            addMessage('Ï£ÑÏÜ°Ìï¥Ïöî, Ïù¥ Í∏∞Îä•ÏùÄ Îç∞Î™®ÏóêÏÑúÎäî ÏßÄÏõêÌïòÏßÄ ÏïäÏïÑÏöî üòÖ');
        }

        function modifyMenu() {
            addMessage('Î©îÎâ¥ ÏàòÏ†ï', true);
            addMessage('Ï£ÑÏÜ°Ìï¥Ïöî, Ïù¥ Í∏∞Îä•ÏùÄ Îç∞Î™®ÏóêÏÑúÎäî ÏßÄÏõêÌïòÏßÄ ÏïäÏïÑÏöî üòÖ');
        }

        function openKakaoMap() {
            window.open('https://map.kakao.com/', '_blank');
        }

        function goToCheckin() {
            window.location.href = 'new_checkin.html';
        }

        function goBack() {
            window.location.href = 'index.html';
        }

        // Ï¥àÍ∏∞ ÎåÄÌôî ÏãúÏûë
        setTimeout(() => {
            addUserMessage('Îã®Î¨¥ÏßÄ', 'Îã®', 'Ïò§Îäò Ï†ÄÎÖÅ Í∞ïÎÇ®ÏóêÏÑú ÎßåÎÇ†ÍπåÏöî?');

            setTimeout(() => {
                addUserMessage('ÏΩòÏπòÏ¶à', 'ÏΩò', 'ÎÑ§, Ï¢ãÏïÑÏöî 6Ïãú Ï¥àÎ∞• Ïñ¥Îñ†ÏÑ∏Ïöî?', true);

                setTimeout(() => {
                    addUserMessage('Ïó∞Ïñ¥ÌîºÏπò', 'Ïó∞', 'Ï¥àÎ∞• Ï¢ãÏïÑÏöî! Ïù∏Îãπ Ìïú 3ÎßåÏõêÏ†ïÎèÑÎ©¥ Ï†ÅÎãπÌï†ÍπåÏöî? Í∑∏Î¶¨Í≥†, Ïò§ÎûúÎßåÏóê Î≥¥ÎäîÍ±∞Îãà Ï°∞Ïö©Ìïú Í≥≥ÏóêÏÑú Î¥êÏú†');

                    setTimeout(() => {
                        addUserMessage('ÏΩòÏπòÏ¶à', 'ÏΩò', 'üëç', true);

                        setTimeout(() => {
                            addUserMessage('Îã®Î¨¥ÏßÄ', 'Îã®', 'ÎÑ§, @Ïπ¥Î∞ç ÏïΩÏÜç Ï†ïÎ¶¨ Ï¢Ä ÎèÑÏôÄÏ§ÑÎûò?');

                            setTimeout(() => {
                                addMessage('ÏïàÎÖïÌïòÏÑ∏Ïöî! ÎåÄÌôîÎ•º Í∏∞Î∞òÏúºÎ°ú ÏïΩÏÜç ÌóàÎ∏åÎ•º ÎßåÎì§Ïñ¥ÎìúÎ¶¥Í≤åÏöî üéØ<br><br>Ï∞∏Ïó¨ÏûêÎì§Ïùò ÏÑ†Ìò∏ÎèÑÎ•º ÏàòÏßëÌï¥ÏÑú ÏµúÏ†ÅÏùò Ïû•ÏÜåÎ•º Ï∂îÏ≤úÌï¥ÎìúÎ¶ΩÎãàÎã§!', false, true, [
                                    { text: 'üöÄ ÏïΩÏÜç ÌóàÎ∏å ÎßåÎì§Í∏∞', action: 'createAppointmentHub()', primary: true }
                                ]);
                            }, 1000);
                        }, 1000);
                    }, 1500);
                }, 2000);
            }, 1500);
        }, 1000);
    </script>
</body>

</html>
