<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïπ¥Î∞ç - Ïä§ÎßàÌä∏ Ï∂úÌá¥Í∑º Í¥ÄÎ¶¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'kakao-yellow': '#fef01b',
                        'kakao-bg': '#9bbbd4',
                        'kakao-text': '#556677',
                        'kakao-chat-bg': '#b2c7da'
                    },
                    fontFamily: {
                        'kakao': ['Apple SD Gothic Neo', 'Malgun Gothic', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            background: linear-gradient(to bottom, #b2c7da, #9bbbd4);
        }

        .message-bubble {
            max-width: 75%;
            word-wrap: break-word;
            animation: slideIn 0.3s ease-out;
        }

        .message-other {
            background: white;
            border-radius: 18px 18px 18px 4px;
        }

        .message-user {
            background: #fef01b;
            border-radius: 18px 18px 4px 18px;
            margin-left: auto;
        }

        .message-system {
            background: #f0f8ff;
            border: 1px solid #e0f0ff;
            border-radius: 12px;
            margin: 8px auto;
            max-width: 90%;
        }

        .typing-indicator {
            animation: pulse 1.5s infinite;
        }

        .route-card {
            background: white;
            border-radius: 16px;
            border: 1px solid #e0e0e0;
            margin: 8px 0;
            overflow: hidden;
        }

        .urgent-message {
            background: #fff5f5;
            border: 2px solid #fed7d7;
            animation: urgentPulse 2s infinite;
        }

        .time-picker {
            background: white;
            border-radius: 16px;
            border: 1px solid #e0e0e0;
            margin: 8px 0;
            padding: 16px;
            max-width: 280px;
        }

        .time-display {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            color: #333;
            margin: 16px 0;
        }

        .time-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 8px 0;
        }

        .time-button {
            background: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.2s;
        }

        .time-button:hover {
            background: #e0e0e0;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        @keyframes urgentPulse {
            0%, 100% {
                border-color: #fed7d7;
            }
            50% {
                border-color: #fc8181;
            }
        }

        .button-action {
            background: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 8px 16px;
            margin: 4px 2px;
            display: inline-block;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }

        .button-action:hover {
            background: #e0e0e0;
        }

        .button-primary {
            background: #fef01b;
            border: 1px solid #e6d600;
        }

        .button-primary:hover {
            background: #e6d600;
        }

        .button-urgent {
            background: #ff6b6b;
            color: white;
            border: 1px solid #ff5252;
        }

        .button-urgent:hover {
            background: #ff5252;
        }

        .time-badge {
            background: #e8f5e8;
            color: #2d5a2d;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .notification-sound {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #fef01b;
            color: #333;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            animation: notificationPop 0.5s ease-out;
            z-index: 1000;
        }

        @keyframes notificationPop {
            0% {
                transform: translateY(-20px) scale(0.8);
                opacity: 0;
            }
            100% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- ÏïåÎ¶º ÏÇ¨Ïö¥Îìú ÌëúÏãú -->
    <div id="notification-sound" class="notification-sound hidden">
        üîî Ïπ¥Î∞ç ÏïåÎ¶º
    </div>

    <!-- Ïπ¥Ïπ¥Ïò§ÌÜ° Ìó§Îçî -->
    <div class="bg-kakao-yellow shadow-sm">
        <div class="max-w-md mx-auto px-4 py-3 flex items-center">
            <button onclick="goBack()" class="mr-3 text-gray-700">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                </svg>
            </button>
            <div class="flex items-center space-x-3 flex-1">
                <div class="w-10 h-10 bg-gradient-to-br from-pink-400 to-purple-500 rounded-full flex items-center justify-center">
                    <span class="text-white text-lg">ü§ñ</span>
                </div>
                <div>
                    <h1 class="font-semibold text-gray-800">Ïπ¥Î∞ç</h1>
                    <p class="text-xs text-gray-600" id="calming-status">Ï∂úÌá¥Í∑º Í¥ÄÎ¶¨ ÎπÑÏÑú</p>
                </div>
            </div>
            <div class="flex space-x-2">
                <button onclick="showTimeSimulator()" class="text-gray-700 text-xs bg-white bg-opacity-50 px-2 py-1 rounded">
                    ‚è∞ ÏãúÍ∞Ñ
                </button>
                <button class="text-gray-700">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Ï±ÑÌåÖ ÏòÅÏó≠ -->
    <div class="max-w-md mx-auto bg-kakao-chat-bg min-h-screen">
        <div id="chat-container" class="p-4 space-y-3 pb-20">
            <!-- Î©îÏãúÏßÄÎì§Ïù¥ Ïó¨Í∏∞Ïóê Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
        </div>

        <!-- ÏûÖÎ†• ÏòÅÏó≠ -->
        <div class="fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-md bg-white border-t p-3">
            <div class="flex items-center space-x-2">
                <button class="text-gray-500">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                </button>
                <input id="message-input" type="text" placeholder="Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" 
                    class="flex-1 px-3 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-kakao-yellow"
                    onkeypress="handleKeyPress(event)">
                <button onclick="sendMessage()" class="bg-kakao-yellow text-gray-800 px-4 py-2 rounded-full font-medium hover:bg-yellow-500 transition-colors">
                    Ï†ÑÏÜ°
                </button>
            </div>
        </div>
    </div>

    <!-- ÏãúÍ∞Ñ ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ Î™®Îã¨ -->
    <div id="time-simulator" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-2xl p-6 w-80">
            <h3 class="text-lg font-bold text-gray-800 mb-4">ÏãúÍ∞Ñ ÏãúÎÆ¨Î†àÏù¥ÏÖò</h3>
            <div class="space-y-3">
                <button onclick="simulateTime('06:50', 'morning')" class="w-full bg-blue-100 text-blue-800 py-3 px-4 rounded-xl font-medium hover:bg-blue-200 transition-colors">
                    üåÖ 06:50 - Î™®Îãù Î∏åÎ¶¨Ìïë
                </button>
                <button onclick="simulateTime('08:08', 'departure')" class="w-full bg-green-100 text-green-800 py-3 px-4 rounded-xl font-medium hover:bg-green-200 transition-colors">
                    üöÄ 08:08 - Ï∂úÎ∞ú ÏïåÎ¶º
                </button>
                <button onclick="simulateTime('07:45', 'exception')" class="w-full bg-red-100 text-red-800 py-3 px-4 rounded-xl font-medium hover:bg-red-200 transition-colors">
                    üö® 07:45 - ÏßÄÌïòÏ≤† ÏßÄÏó∞
                </button>
                <button onclick="simulateTime('07:30', 'weather')" class="w-full bg-orange-100 text-orange-800 py-3 px-4 rounded-xl font-medium hover:bg-orange-200 transition-colors">
                    üåßÔ∏è 07:30 - ÎÇ†Ïî® Í∏¥Í∏âÏÉÅÌô©
                </button>
                <button onclick="simulateTime('17:30', 'evening')" class="w-full bg-purple-100 text-purple-800 py-3 px-4 rounded-xl font-medium hover:bg-purple-200 transition-colors">
                    üåÜ 17:30 - Ìá¥Í∑º ÏïåÎ¶º
                </button>
            </div>
            <button onclick="closeTimeSimulator()" class="w-full mt-4 bg-gray-200 text-gray-700 py-2 px-4 rounded-xl font-medium hover:bg-gray-300 transition-colors">
                Îã´Í∏∞
            </button>
        </div>
    </div>

    <script>
        let chatContainer = document.getElementById('chat-container');
        let messageInput = document.getElementById('message-input');
        let currentStep = 0;
        let isOnboarded = false;
        let userProfile = {
            name: '',
            homeAddress: '',
            workAddress: '',
            arrivalTime: { hour: 9, minute: 0, period: 'AM' },
            allowTracking: false
        };

        // ÏïåÎ¶º ÏÇ¨Ïö¥Îìú ÌëúÏãú
        function showNotificationSound() {
            const soundDiv = document.getElementById('notification-sound');
            soundDiv.classList.remove('hidden');
            setTimeout(() => {
                soundDiv.classList.add('hidden');
            }, 2000);
        }

        // Î©îÏãúÏßÄ Ï∂îÍ∞Ä Ìï®Ïàò
        function addMessage(content, isUser = false, hasButtons = false, buttons = [], isUrgent = false, isSystem = false) {
            const messageDiv = document.createElement('div');
            let className = `message-bubble p-3 mb-2`;
            
            if (isSystem) {
                className += ' message-system';
            } else if (isUser) {
                className += ' message-user ml-auto';
            } else {
                className += ` message-other ${isUrgent ? 'urgent-message' : ''}`;
            }
            
            messageDiv.className = className;
            
            let messageHTML = `<p class="text-sm ${isSystem ? 'text-blue-800 text-center' : 'text-gray-800'}">${content}</p>`;
            
            if (hasButtons && buttons.length > 0) {
                messageHTML += '<div class="mt-3 space-y-1">';
                buttons.forEach(button => {
                    let buttonClass = 'button-action text-sm';
                    if (button.urgent) buttonClass = 'button-urgent text-sm';
                    else if (button.primary) buttonClass = 'button-primary text-sm';
                    
                    messageHTML += `<button onclick="${button.action}" class="${buttonClass}">${button.text}</button>`;
                });
                messageHTML += '</div>';
            }
            
            messageDiv.innerHTML = messageHTML;
            chatContainer.appendChild(messageDiv);
            scrollToBottom();
        }

        // ÏãúÍ∞Ñ ÏÑ†ÌÉùÍ∏∞ Ï∂îÍ∞Ä
        function addTimePicker() {
            const timePickerDiv = document.createElement('div');
            timePickerDiv.className = 'time-picker';
            timePickerDiv.id = 'time-picker';
            
            const timeDisplay = formatTime(userProfile.arrivalTime);
            
            timePickerDiv.innerHTML = `
                <h4 class="font-semibold text-gray-800 mb-3 text-center">ÌöåÏÇ¨ ÎèÑÏ∞© Ìù¨Îßù ÏãúÍ∞Ñ</h4>
                <div class="time-display" id="time-display">${timeDisplay}</div>
                
                <div class="time-controls">
                    <span class="text-sm text-gray-600">ÏãúÍ∞Ñ</span>
                    <div class="flex items-center space-x-2">
                        <button class="time-button" onclick="adjustTime('hour', -1)">‚àí</button>
                        <span class="w-8 text-center font-semibold" id="hour-display">${userProfile.arrivalTime.hour}</span>
                        <button class="time-button" onclick="adjustTime('hour', 1)">+</button>
                    </div>
                </div>
                
                <div class="time-controls">
                    <span class="text-sm text-gray-600">Î∂Ñ</span>
                    <div class="flex items-center space-x-2">
                        <button class="time-button" onclick="adjustTime('minute', -15)">‚àí</button>
                        <span class="w-8 text-center font-semibold" id="minute-display">${userProfile.arrivalTime.minute.toString().padStart(2, '0')}</span>
                        <button class="time-button" onclick="adjustTime('minute', 15)">+</button>
                    </div>
                </div>
                
                <div class="time-controls">
                    <span class="text-sm text-gray-600">Ïò§Ï†Ñ/Ïò§ÌõÑ</span>
                    <div class="flex items-center space-x-2">
                        <button class="time-button" onclick="togglePeriod()" style="width: auto; padding: 8px 16px; border-radius: 20px;">
                            <span id="period-display">${userProfile.arrivalTime.period}</span>
                        </button>
                    </div>
                </div>
                
                <button onclick="confirmArrivalTime()" class="w-full mt-4 bg-kakao-yellow text-gray-800 py-2 px-4 rounded-xl font-medium hover:bg-yellow-500 transition-colors">
                    ‚úÖ ÏãúÍ∞Ñ ÌôïÏ†ï
                </button>
            `;
            
            chatContainer.appendChild(timePickerDiv);
            scrollToBottom();
        }

        // ÏãúÍ∞Ñ Ìè¨Îß∑ÌåÖ
        function formatTime(timeObj) {
            const hour = timeObj.hour;
            const minute = timeObj.minute.toString().padStart(2, '0');
            const period = timeObj.period;
            return `${hour}:${minute} ${period}`;
        }

        // ÏãúÍ∞Ñ Ï°∞Ï†ï
        function adjustTime(type, delta) {
            if (type === 'hour') {
                userProfile.arrivalTime.hour += delta;
                if (userProfile.arrivalTime.hour > 12) userProfile.arrivalTime.hour = 1;
                if (userProfile.arrivalTime.hour < 1) userProfile.arrivalTime.hour = 12;
            } else if (type === 'minute') {
                userProfile.arrivalTime.minute += delta;
                if (userProfile.arrivalTime.minute >= 60) userProfile.arrivalTime.minute = 0;
                if (userProfile.arrivalTime.minute < 0) userProfile.arrivalTime.minute = 45;
            }
            
            updateTimeDisplay();
        }

        // Ïò§Ï†Ñ/Ïò§ÌõÑ ÌÜ†Í∏Ä
        function togglePeriod() {
            userProfile.arrivalTime.period = userProfile.arrivalTime.period === 'AM' ? 'PM' : 'AM';
            updateTimeDisplay();
        }

        // ÏãúÍ∞Ñ ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
        function updateTimeDisplay() {
            document.getElementById('time-display').textContent = formatTime(userProfile.arrivalTime);
            document.getElementById('hour-display').textContent = userProfile.arrivalTime.hour;
            document.getElementById('minute-display').textContent = userProfile.arrivalTime.minute.toString().padStart(2, '0');
            document.getElementById('period-display').textContent = userProfile.arrivalTime.period;
        }

        // ÎèÑÏ∞© ÏãúÍ∞Ñ ÌôïÏ†ï
        function confirmArrivalTime() {
            const timeString = formatTime(userProfile.arrivalTime);
            addMessage(`ÎèÑÏ∞© Ìù¨Îßù ÏãúÍ∞Ñ: ${timeString}`, true);
            
            // ÏãúÍ∞Ñ ÏÑ†ÌÉùÍ∏∞ Ï†úÍ±∞
            const timePicker = document.getElementById('time-picker');
            if (timePicker) timePicker.remove();
            
            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addMessage('ÏôÑÎ≤ΩÌï¥Ïöî! ÎßàÏßÄÎßâÏúºÎ°ú Îçî Ï†ïÌôïÌïú Ï∂îÏ≤úÏùÑ ÏúÑÌï¥ Ïù¥Îèô Ìå®ÌÑ¥ ÌïôÏäµÏóê ÎèôÏùòÌï¥Ï£ºÏãúÍ≤†Ïñ¥Ïöî?', false, true, [
                        { text: 'üìã ÏûêÏÑ∏Ìïú ÎÇ¥Ïö© Î≥¥Í∏∞', action: 'showPrivacyDetails()', primary: false },
                        { text: 'ÎÑ§, ÎèôÏùòÌï¥Ïöî', action: 'allowTracking(true)', primary: false },
                        { text: 'ÏïÑÎãàÏöî, Í¥úÏ∞ÆÏïÑÏöî', action: 'allowTracking(false)', primary: false }
                    ]);
                }, 1500);
            }, 500);
        }

        // Í≤ΩÎ°ú Ïπ¥Îìú Ï∂îÍ∞Ä
        function addRouteCard(routes, title = "Ï∂îÏ≤ú Í≤ΩÎ°ú") {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'route-card p-4 mb-2 max-w-xs';
            
            let cardHTML = `<h4 class="font-semibold text-gray-800 mb-3">${title}</h4>`;
            
            routes.forEach((route, index) => {
                const statusColor = route.status === 'ÏõêÌôú' ? 'text-green-600' : 
                                  route.status === 'ÏßÄÏó∞' ? 'text-red-600' : 'text-orange-600';
                
                cardHTML += `
                    <div class="flex items-center justify-between p-3 ${index > 0 ? 'border-t border-gray-100' : ''} ${route.recommended ? 'bg-yellow-50 rounded-lg' : ''}">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 ${route.color} rounded-full flex items-center justify-center">
                                <span class="text-white text-xs font-bold">${route.icon}</span>
                            </div>
                            <div>
                                <p class="font-medium text-gray-800 text-sm">${route.name}</p>
                                <p class="text-xs text-gray-600">${route.description}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-semibold text-gray-800">${route.time}</div>
                            <div class="text-xs ${statusColor}">${route.status}</div>
                        </div>
                    </div>
                `;
            });
            
            cardHTML += `
                <button onclick="startNavigation()" class="w-full mt-3 bg-kakao-yellow text-gray-800 py-2 px-4 rounded-xl font-medium hover:bg-yellow-500 transition-colors">
                    üó∫Ô∏è Í≤ΩÎ°ú ÏïàÎÇ¥ ÏãúÏûë
                </button>
            `;
            
            cardDiv.innerHTML = cardHTML;
            chatContainer.appendChild(cardDiv);
            scrollToBottom();
        }

        // ÌÉÄÏù¥Ìïë Ïù∏ÎîîÏºÄÏù¥ÌÑ∞
        function showTyping() {
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'message-bubble message-other p-3 mb-2 typing-indicator';
            typingDiv.innerHTML = '<p class="text-sm text-gray-600">Ïπ¥Î∞çÏù¥ ÏûÖÎ†• Ï§ë...</p>';
            chatContainer.appendChild(typingDiv);
            scrollToBottom();
        }

        function hideTyping() {
            const typing = document.getElementById('typing-indicator');
            if (typing) typing.remove();
        }

        // Ïä§ÌÅ¨Î°§ ÌïòÎã®ÏúºÎ°ú
        function scrollToBottom() {
            setTimeout(() => {
                window.scrollTo(0, document.body.scrollHeight);
            }, 100);
        }

        // ÌÇ§ ÏûÖÎ†• Ï≤òÎ¶¨
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Î©îÏãúÏßÄ Ï†ÑÏÜ°
        function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            addMessage(message, true);
            messageInput.value = '';
            
            setTimeout(() => {
                handleCalmingResponse(message);
            }, 1000);
        }

        // Ïπ¥Î∞ç ÏùëÎãµ Ï≤òÎ¶¨
        function handleCalmingResponse(userMessage) {
            showTyping();
            
            setTimeout(() => {
                hideTyping();
                
                if (!isOnboarded && (userMessage.includes('Ï∂úÌá¥Í∑º') || userMessage.includes('Ïπ¥Î∞ç'))) {
                    startOnboarding();
                } else if (isOnboarded) {
                    handleOnboardedResponse(userMessage);
                } else {
                    addMessage('ÏïàÎÖïÌïòÏÑ∏Ïöî! Ï∂úÌá¥Í∑º Í¥ÄÎ¶¨Í∞Ä ÌïÑÏöîÌïòÏãúÎ©¥ "Ï∂úÌá¥Í∑º ÏïåÎ†§Ï§ò"ÎùºÍ≥† ÎßêÏîÄÌï¥Ï£ºÏÑ∏Ïöî! üòä');
                }
            }, 2000);
        }

        // Ïò®Î≥¥Îî© ÏôÑÎ£å ÌõÑ ÏùëÎãµ
        function handleOnboardedResponse(message) {
            if (message.includes('ÏïåÎ¶º') || message.includes('Î∏åÎ¶¨Ìïë')) {
                addMessage('Ïñ¥Îñ§ ÏïåÎ¶ºÏùÑ ÌôïÏù∏Ìï¥Î≥¥ÏãúÍ≤†Ïñ¥Ïöî?', false, true, [
                    { text: 'üåÖ Î™®Îãù Î∏åÎ¶¨Ìïë', action: 'sendMorningBriefing()', primary: false },
                    { text: 'üöÄ Ï∂úÎ∞ú ÏïåÎ¶º', action: 'sendDepartureAlert()', primary: false },
                    { text: 'üö® Í∏¥Í∏â ÏïåÎ¶º', action: 'sendExceptionAlert()', primary: false }
                ]);
            } else if (message.includes('Í≤ΩÎ°ú') || message.includes('Í∏∏')) {
                addMessage('ÌòÑÏû¨ ÍµêÌÜµ ÏÉÅÌô©ÏùÑ ÌôïÏù∏Ìï¥ÎìúÎ¶¥Í≤åÏöî!', false);
                setTimeout(() => {
                    const routes = [
                        {
                            name: '2Ìò∏ÏÑ† + ÎèÑÎ≥¥',
                            description: 'Í∞ïÎÇ®Ïó≠ ‚Üí ÌöåÏÇ¨',
                            time: '42Î∂Ñ',
                            status: 'ÏõêÌôú',
                            color: 'bg-blue-500',
                            icon: '2',
                            recommended: true
                        },
                        {
                            name: '740Î≤à Î≤ÑÏä§',
                            description: 'ÏßÅÌñâ',
                            time: '48Î∂Ñ',
                            status: 'Î≥¥ÌÜµ',
                            color: 'bg-green-500',
                            icon: 'üöå'
                        }
                    ];
                    addRouteCard(routes);
                }, 1000);
            } else {
                addMessage('Î¨¥ÏóáÏùÑ ÎèÑÏôÄÎìúÎ¶¥ÍπåÏöî? üòä', false, true, [
                    { text: 'üìç ÌòÑÏû¨ Í≤ΩÎ°ú ÌôïÏù∏', action: 'checkCurrentRoute()', primary: false },
                    { text: '‚è∞ ÏïåÎ¶º ÏÑ§Ï†ï', action: 'showNotificationSettings()', primary: false },
                    { text: 'üó∫Ô∏è Ïπ¥Ïπ¥Ïò§Îßµ Ïó¥Í∏∞', action: 'openKakaoMap()', primary: false }
                ]);
            }
        }

        // Ïò®Î≥¥Îî© ÏãúÏûë
        function startOnboarding() {
            addMessage(`ÏïàÎÖïÌïòÏÑ∏Ïöî! Îß§Ïùº ÏïÑÏπ® Ï∂úÍ∑ºÍ∏∏ÏùÑ Ï±ôÍ≤®ÎìúÎ¶¨Îäî ÎπÑÏÑú, Ïπ¥Î∞çÏù¥ÏóêÏöî. üòä<br><br>Î®ºÏ†Ä Ï∂úÌá¥Í∑º ÌîÑÎ°úÌïÑÏùÑ ÎßåÎì§Ïñ¥Î≥ºÍπåÏöî?<br><br>Ïßë Ï£ºÏÜåÎ•º ÏïåÎ†§Ï£ºÏãúÍ≤†Ïñ¥Ïöî?`, false, true, [
                { text: 'üè† Ï£ºÏÜå Í≤ÄÏÉâ', action: 'searchHomeAddress()', primary: false }
            ]);
        }

        // Ï£ºÏÜå Í≤ÄÏÉâ (Í∞ÑÎã®Ìïú Î≤ÑÏ†Ñ)
        function searchHomeAddress() {
            const addresses = [
                'ÏÑúÏö∏Ïãú Í∞ïÎÇ®Íµ¨ ÌÖåÌó§ÎûÄÎ°ú 123',
                'ÏÑúÏö∏Ïãú ÏÑúÏ¥àÍµ¨ ÏÑúÏ¥àÎåÄÎ°ú 456', 
                'ÏÑúÏö∏Ïãú ÏÜ°ÌååÍµ¨ Ïò¨Î¶ºÌîΩÎ°ú 789',
                'ÏÑúÏö∏Ïãú ÎßàÌè¨Íµ¨ ÏõîÎìúÏªµÎ∂ÅÎ°ú 321'
            ];
            
            const randomAddress = addresses[Math.floor(Math.random() * addresses.length)];
            userProfile.homeAddress = randomAddress;
            
            setTimeout(() => {
                addMessage(`Ïßë Ï£ºÏÜå: ${randomAddress}`, true);
                
                setTimeout(() => {
                    showTyping();
                    setTimeout(() => {
                        hideTyping();
                        addMessage('Ï¢ãÏïÑÏöî! Ïù¥Ï†ú ÌöåÏÇ¨ Ï£ºÏÜåÎèÑ ÏïåÎ†§Ï£ºÏÑ∏Ïöî.', false, true, [
                            { text: 'üè¢ Ï£ºÏÜå Í≤ÄÏÉâ', action: 'searchWorkAddress()', primary: false }
                        ]);
                    }, 1500);
                }, 500);
            }, 1000);
        }

        function searchWorkAddress() {
            const addresses = [
                'ÏÑúÏö∏Ïãú Í∞ïÎÇ®Íµ¨ Ïó≠ÏÇºÎ°ú 456',
                'ÏÑúÏö∏Ïãú ÏÑúÏ¥àÍµ¨ Í∞ïÎÇ®ÎåÄÎ°ú 789', 
                'ÏÑúÏö∏Ïãú Ï§ëÍµ¨ ÏÑ∏Ï¢ÖÎåÄÎ°ú 123'
            ];
            
            const randomAddress = addresses[Math.floor(Math.random() * addresses.length)];
            userProfile.workAddress = randomAddress;
            
            setTimeout(() => {
                addMessage(`ÌöåÏÇ¨ Ï£ºÏÜå: ${randomAddress}`, true);
                
                setTimeout(() => {
                    showTyping();
                    setTimeout(() => {
                        hideTyping();
                        addMessage('ÏôÑÎ≤ΩÌï¥Ïöî! ÎßàÏßÄÎßâÏúºÎ°ú ÌöåÏÇ¨ ÎèÑÏ∞© Ìù¨Îßù ÏãúÍ∞ÑÏùÑ ÏÑ§Ï†ïÌï¥Ï£ºÏÑ∏Ïöî.');
                        
                        setTimeout(() => {
                            addTimePicker();
                        }, 1000);
                    }, 1500);
                }, 500);
            }, 1000);
        }

        // Í∞úÏù∏Ï†ïÎ≥¥ ÏÉÅÏÑ∏ ÏÑ§Î™Ö
        function showPrivacyDetails() {
            addMessage('ÏûêÏÑ∏Ìïú ÎÇ¥Ïö©ÏùÑ ÏïåÎ†§Ï£ºÏÑ∏Ïöî', true);
            
            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addMessage('üîí Í∞úÏù∏Ï†ïÎ≥¥ Ï≤òÎ¶¨ Î∞©Ïπ®<br><br><strong>ÏàòÏßëÌïòÎäî Ï†ïÎ≥¥:</strong><br>‚Ä¢ Ï∂úÎ∞ú/ÎèÑÏ∞© ÏãúÍ∞Ñ Í∏∞Î°ù<br>‚Ä¢ Ïù¥Ïö© ÍµêÌÜµÏàòÎã® (ÏßÄÌïòÏ≤†/Î≤ÑÏä§/ÎèÑÎ≥¥)<br>‚Ä¢ Í≤ΩÎ°ú ÏÑ†ÌÉù Ìå®ÌÑ¥<br><br><strong>ÏÇ¨Ïö© Î™©Ï†Å:</strong><br>‚Ä¢ Í∞úÏù∏ ÎßûÏ∂§ Ï∂úÎ∞ú ÏãúÍ∞Ñ Ï∂îÏ≤ú<br>‚Ä¢ ÍµêÌÜµ ÏÉÅÌô© ÏòàÏ∏° Ï†ïÌôïÎèÑ Ìñ•ÏÉÅ<br>‚Ä¢ ÎÇ†Ïî®Î≥Ñ Ïù¥Îèô Ìå®ÌÑ¥ Î∂ÑÏÑù<br><br><strong>Î≥¥Í¥Ä Î∞è Î≥¥Ìò∏:</strong><br>‚Ä¢ ÏµúÍ∑º 30ÏùºÍ∞ÑÎßå Î≥¥Í¥Ä<br>‚Ä¢ ÏïîÌò∏ÌôîÌïòÏó¨ ÏïàÏ†ÑÌïòÍ≤å Ï†ÄÏû•<br>‚Ä¢ Ïô∏Î∂Ä Ï†úÍ≥µ Ï†àÎåÄ Í∏àÏßÄ<br>‚Ä¢ Ïñ∏Ï†úÎì† ÏÇ≠Ï†ú ÏöîÏ≤≠ Í∞ÄÎä•', false, true, [
                        { text: 'ÎèôÏùòÌïòÍ≥† ÏãúÏûëÌïòÍ∏∞', action: 'allowTracking(true)', primary: false },
                        { text: 'ÌïôÏäµ ÏóÜÏù¥ ÏÇ¨Ïö©ÌïòÍ∏∞', action: 'allowTracking(false)', primary: false }
                    ]);
                }, 2500);
            }, 500);
        }

        // Ìå®ÌÑ¥ ÌïôÏäµ ÎèôÏùò (Í∞úÏù∏Ï†ïÎ≥¥ ÏÑ§Î™Ö Ìè¨Ìï®)
        function allowTracking(allow) {
            userProfile.allowTracking = allow;
            addMessage(allow ? 'ÎèôÏùòÌïòÍ≥† ÏãúÏûëÌïòÍ∏∞' : 'ÌïôÏäµ ÏóÜÏù¥ ÏÇ¨Ïö©ÌïòÍ∏∞', true);
            
            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    
                    if (allow) {
                        addMessage('üîí Í∞úÏù∏Ï†ïÎ≥¥ Î≥¥Ìò∏ ÏïàÎÇ¥<br><br>‚Ä¢ ÏàòÏßë Ï†ïÎ≥¥: Ï∂úÎ∞ú/ÎèÑÏ∞© ÏãúÍ∞Ñ, Ïù¥Ïö© ÍµêÌÜµÏàòÎã®<br>‚Ä¢ Î≥¥Í¥Ä Í∏∞Í∞Ñ: ÏµúÍ∑º 30ÏùºÍ∞Ñ<br>‚Ä¢ ÏÇ¨Ïö© Î™©Ï†Å: Í∞úÏù∏ ÎßûÏ∂§ Í≤ΩÎ°ú Ï∂îÏ≤ú<br>‚Ä¢ Ïô∏Î∂Ä Ï†úÍ≥µ: Ï†àÎåÄ ÌïòÏßÄ ÏïäÏùå<br><br>Ïñ∏Ï†úÎì† ÏÑ§Ï†ïÏóêÏÑú ÌïôÏäµÏùÑ Ï§ëÎã®Ìï† Ïàò ÏûàÏñ¥Ïöî.', false, false, [], false, true);
                        
                        setTimeout(() => {
                            completeOnboarding();
                        }, 3000);
                    } else {
                        completeOnboarding();
                    }
                }, 2000);
            }, 500);
        }

        // Ïò®Î≥¥Îî© ÏôÑÎ£å
        function completeOnboarding() {
            showTyping();
            setTimeout(() => {
                hideTyping();
                isOnboarded = true;
                addMessage('‚úÖ Î©ãÏßÑ Ï∂úÌá¥Í∑º ÌîÑÎ°úÌïÑÏù¥ ÏôÑÏÑ±ÎêòÏóàÏñ¥Ïöî!<br><br>Ïù¥Ï†úÎ∂ÄÌÑ∞ Ï†úÍ∞Ä Îß§Ïùº ÏïÑÏπ® Ï±ôÍ≤®ÎìúÎ¶¥Í≤åÏöî.<br><br>ÏÉÅÎã®Ïùò ‚è∞ ÏãúÍ∞Ñ Î≤ÑÌäºÏùÑ ÎàåÎü¨ÏÑú Îã§ÏñëÌïú ÏãúÍ∞ÑÎåÄÏùò ÏïåÎ¶ºÏùÑ Ï≤¥ÌóòÌï¥Î≥¥ÏÑ∏Ïöî!', false, true, [
                    { text: '‚è∞ ÏïåÎ¶º Ï≤¥ÌóòÌïòÍ∏∞', action: 'showTimeSimulator()', primary: false },
                    { text: 'üó∫Ô∏è Ïπ¥Ïπ¥Ïò§Îßµ Ïó¥Í∏∞', action: 'openKakaoMap()', primary: false }
                ]);
                
                // ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                document.getElementById('calming-status').textContent = 'ÌôúÏÑ±ÌôîÎê® ‚Ä¢ Ï∂úÌá¥Í∑º Í¥ÄÎ¶¨ Ï§ë';
            }, 1500);
        }

        // ÏãúÍ∞Ñ ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ ÌëúÏãú
        function showTimeSimulator() {
            document.getElementById('time-simulator').classList.remove('hidden');
        }

        function closeTimeSimulator() {
            document.getElementById('time-simulator').classList.add('hidden');
        }

        // ÏãúÍ∞ÑÎ≥Ñ ÏïåÎ¶º ÏãúÎÆ¨Î†àÏù¥ÏÖò
        function simulateTime(time, type) {
            closeTimeSimulator();
            showNotificationSound();
            
            addMessage(`‚è∞ ÏãúÍ∞Ñ: ${time}`, false, false, [], false, true);
            
            setTimeout(() => {
                if (type === 'morning') {
                    sendMorningBriefing();
                } else if (type === 'departure') {
                    sendDepartureAlert();
                } else if (type === 'exception') {
                    sendExceptionAlert();
                } else if (type === 'weather') {
                    sendWeatherAlert();
                } else if (type === 'evening') {
                    sendEveningAlert();
                }
            }, 1000);
        }

        // Î™®Îãù Î∏åÎ¶¨Ìïë
        function sendMorningBriefing() {
            showTyping();
            setTimeout(() => {
                hideTyping();
                const timeString = formatTime(userProfile.arrivalTime);
                addMessage(`‚òÄÔ∏è Ï¢ãÏùÄ ÏïÑÏπ®!<br><br>Ïò§Îäò Ï∂úÍ∑ºÍ∏∏ÏùÄ ÎåÄÏ≤¥Î°ú ÎßëÍ≥†, ÍµêÌÜµÎèÑ ÏõêÌôúÌï¥Ïöî.<br><br>ÌöåÏÇ¨ÍπåÏßÄ ÏïΩ 45Î∂Ñ ÏòàÏÉÅÎê©ÎãàÎã§.<br><br>${timeString} Ï†ïÏãú ÎèÑÏ∞©ÏùÑ ÏúÑÌï¥ 08:15Ïóê Ï∂úÎ∞úÌïòÏãúÎäî Í±∏ Ï∂îÏ≤úÌï¥Ïöî!`);
                
                setTimeout(() => {
                    const routes = [
                        {
                            name: '2Ìò∏ÏÑ† + ÎèÑÎ≥¥',
                            description: 'Í∞ïÎÇ®Ïó≠ ‚Üí ÌöåÏÇ¨',
                            time: '45Î∂Ñ',
                            status: 'ÏõêÌôú',
                            color: 'bg-blue-500',
                            icon: '2',
                            recommended: true
                        }
                    ];
                    addRouteCard(routes, "Ïò§ÎäòÏùò Ï∂îÏ≤ú Í≤ΩÎ°ú");
                }, 1000);
            }, 2000);
        }

        // Ï∂úÎ∞ú ÏïåÎ¶º
        function sendDepartureAlert() {
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('üöÄ ÏßÄÍ∏à Î∞îÎ°ú Ï∂úÎ∞úÌïòÏÑ∏Ïöî!<br><br>Ïò§ÎäòÎèÑ ÌûòÎÇ¥ÏÑ∏Ïöî!', false, false, [], false);
                
                setTimeout(() => {
                    const routes = [
                        {
                            name: '2Ìò∏ÏÑ† + ÎèÑÎ≥¥',
                            description: 'Í∞ïÎÇ®Ïó≠ ‚Üí ÌöåÏÇ¨',
                            time: '42Î∂Ñ',
                            status: 'ÏõêÌôú',
                            color: 'bg-blue-500',
                            icon: '2',
                            recommended: true
                        }
                    ];
                    addRouteCard(routes, "ÏßÄÍ∏à Ï∂úÎ∞ú Í≤ΩÎ°ú");
                }, 1000);
            }, 1500);
        }

        // ÏòàÏô∏ ÏÉÅÌô© ÏïåÎ¶º
        function sendExceptionAlert() {
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('üö® <strong>Í∏¥Í∏â ÏÉÅÌô©!</strong><br><br>2Ìò∏ÏÑ†Ïóê Ïã†Ìò∏ Ïû•Ïï†Í∞Ä Î∞úÏÉùÌñàÏñ¥Ïöî. 15Î∂Ñ ÏßÄÏó∞Ïù¥ ÏòàÏÉÅÎê©ÎãàÎã§.<br><br>ÎåÄÏïà Í≤ΩÎ°úÎ•º Ï∂îÏ≤úÌï¥ÎìúÎ¶¥Í≤åÏöî!', false, false, [], true);
                
                setTimeout(() => {
                    addMessage('üîÑ ÎåÄÏïà Í≤ΩÎ°ú ÏïàÎÇ¥<br><br>‚Ä¢ 3Ìò∏ÏÑ† ÌôòÏäπ Í≤ΩÎ°ú: 35Î∂Ñ<br>‚Ä¢ Î≤ÑÏä§ 740Î≤à: 40Î∂Ñ<br>‚Ä¢ ÌÉùÏãú Ïù¥Ïö©: 25Î∂Ñ (8,000Ïõê)', false, true, [
                        { text: 'üöá ÏßÄÌïòÏ≤† Í≤ΩÎ°úÎ°ú Î≥ÄÍ≤Ω', action: 'useAlternativeRoute()', primary: false },
                        { text: 'üåÇ Ïö∞ÏÇ∞ Ï±ôÍ∏∞Í∏∞ ÏïåÎ¶º', action: 'setUmbrellaReminder()', primary: false }
                    ]);
                }, 2000);
            }, 1500);
        }

        // ÎÇ†Ïî® ÏïåÎ¶º
        function sendWeatherAlert() {
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('üåßÔ∏è <strong>ÎÇ†Ïî® ÏïåÎ¶º!</strong><br><br>30Î∂Ñ Îí§Î∂ÄÌÑ∞ ÎπÑÍ∞Ä Ïò¨ ÏòàÏ†ïÏù¥ÏóêÏöî.<br><br>Ïö∞ÏÇ∞ÏùÑ Ï±ôÍ∏∞ÏãúÍ≥† ÌèâÏÜåÎ≥¥Îã§ 5Î∂Ñ ÏùºÏ∞ç Ï∂úÎ∞úÌïòÏÑ∏Ïöî!', false, false, [], false);
                
                setTimeout(() => {
                    addMessage('‚òî ÎπÑ ÎåÄÎπÑ Ï∂îÏ≤ú<br><br>‚Ä¢ Ïö∞ÏÇ∞ Ï±ôÍ∏∞Í∏∞<br>‚Ä¢ 5Î∂Ñ ÏùºÏ∞ç Ï∂úÎ∞ú<br>‚Ä¢ ÏßÄÌïò ÌÜµÎ°ú Ïù¥Ïö©', false, true, [
                        { text: 'üåÇ Ïö∞ÏÇ∞ Ï±ôÍ∏∞Í∏∞ ÏïåÎ¶º', action: 'setUmbrellaReminder()', primary: false },
                        { text: '‚è∞ ÏùºÏ∞ç Ï∂úÎ∞ú ÏÑ§Ï†ï', action: 'setEarlyDeparture()', primary: false }
                    ]);
                }, 2000);
            }, 1500);
        }

        // Ìá¥Í∑º ÏïåÎ¶º
        function sendEveningAlert() {
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('üåÜ Ìá¥Í∑º ÏãúÍ∞ÑÏù¥ÏóêÏöî!<br><br>Ïò§Îäò ÌïòÎ£® ÏàòÍ≥†ÌïòÏÖ®Ïñ¥Ïöî.<br><br>ÏßëÍπåÏßÄ ÏïΩ 40Î∂Ñ ÏòàÏÉÅÎê©ÎãàÎã§.', false, false, [], false);
                
                setTimeout(() => {
                    const routes = [
                        {
                            name: '2Ìò∏ÏÑ† + ÎèÑÎ≥¥',
                            description: 'ÌöåÏÇ¨ ‚Üí Ïßë',
                            time: '40Î∂Ñ',
                            status: 'ÏïΩÍ∞Ñ ÌòºÏû°',
                            color: 'bg-blue-500',
                            icon: '2',
                            recommended: true
                        }
                    ];
                    addRouteCard(routes, "Ìá¥Í∑º Í≤ΩÎ°ú");
                }, 1000);
            }, 1500);
        }

        // Ïπ¥Ïπ¥Ïò§Îßµ Ïó¥Í∏∞
        function openKakaoMap() {
            window.open('https://map.kakao.com/', '_blank');
        }

        function startNavigation() {
            openKakaoMap();
        }

        // Í∏∞ÌÉÄ Ìï®ÏàòÎì§
        function useAlternativeRoute() {
            addMessage('ÎåÄÏïà Í≤ΩÎ°úÎ°ú Î≥ÄÍ≤ΩÌñàÏäµÎãàÎã§', true);
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('‚úÖ 3Ìò∏ÏÑ† ÌôòÏäπ Í≤ΩÎ°úÎ°ú ÏïàÎÇ¥Î•º ÏãúÏûëÌï©ÎãàÎã§!<br><br>ÏòàÏÉÅ ÏÜåÏöî ÏãúÍ∞Ñ: 35Î∂Ñ');
            }, 1000);
        }

        function setUmbrellaReminder() {
            addMessage('Ïö∞ÏÇ∞ Ï±ôÍ∏∞Í∏∞ ÏïåÎ¶º ÏÑ§Ï†ï', true);
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('üåÇ Ïö∞ÏÇ∞ Ï±ôÍ∏∞Í∏∞ ÏïåÎ¶ºÏù¥ ÏÑ§Ï†ïÎêòÏóàÏñ¥Ïöî!<br><br>Ï∂úÎ∞ú 5Î∂Ñ Ï†ÑÏóê Îã§Ïãú ÏïåÎ†§ÎìúÎ¶¥Í≤åÏöî.');
            }, 1000);
        }

        function setEarlyDeparture() {
            addMessage('ÏùºÏ∞ç Ï∂úÎ∞ú ÏÑ§Ï†ï', true);
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('‚è∞ 5Î∂Ñ ÏùºÏ∞ç Ï∂úÎ∞úÌïòÎèÑÎ°ù ÏÑ§Ï†ïÎêòÏóàÏñ¥Ïöî!<br><br>ÏÉàÎ°úÏö¥ Ï∂úÎ∞ú ÏãúÍ∞Ñ: 08:10');
            }, 1000);
        }

        function checkCurrentRoute() {
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('ÌòÑÏû¨ Í≤ΩÎ°úÎ•º ÌôïÏù∏Ìï¥ÎìúÎ¶¥Í≤åÏöî!', false);
                setTimeout(() => {
                    const routes = [
                        {
                            name: '2Ìò∏ÏÑ† + ÎèÑÎ≥¥',
                            description: 'Í∞ïÎÇ®Ïó≠ ‚Üí ÌöåÏÇ¨',
                            time: '42Î∂Ñ',
                            status: 'ÏõêÌôú',
                            color: 'bg-blue-500',
                            icon: '2',
                            recommended: true
                        }
                    ];
                    addRouteCard(routes);
                }, 1000);
            }, 1000);
        }

        function showNotificationSettings() {
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('ÏïåÎ¶º ÏÑ§Ï†ïÏùÑ ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî!', false, true, [
                    { text: 'üåÖ Î™®Îãù Î∏åÎ¶¨Ìïë ON/OFF', action: 'toggleMorningBriefing()', primary: false },
                    { text: 'üöÄ Ï∂úÎ∞ú ÏïåÎ¶º ON/OFF', action: 'toggleDepartureAlert()', primary: false },
                    { text: 'üåßÔ∏è ÎÇ†Ïî® ÏïåÎ¶º ON/OFF', action: 'toggleWeatherAlert()', primary: false }
                ]);
            }, 1000);
        }

        function toggleMorningBriefing() {
            addMessage('Î™®Îãù Î∏åÎ¶¨Ìïë ÏÑ§Ï†ï Î≥ÄÍ≤Ω', true);
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('‚úÖ Î™®Îãù Î∏åÎ¶¨ÌïëÏù¥ ÌôúÏÑ±ÌôîÎêòÏóàÏñ¥Ïöî!<br><br>Îß§Ïùº ÏïÑÏπ® 6:50Ïóê ÏïåÎ†§ÎìúÎ¶¥Í≤åÏöî.');
            }, 1000);
        }

        function toggleDepartureAlert() {
            addMessage('Ï∂úÎ∞ú ÏïåÎ¶º ÏÑ§Ï†ï Î≥ÄÍ≤Ω', true);
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('‚úÖ Ï∂úÎ∞ú ÏïåÎ¶ºÏù¥ ÌôúÏÑ±ÌôîÎêòÏóàÏñ¥Ïöî!<br><br>Ï∂úÎ∞ú ÏãúÍ∞ÑÏóê ÎßûÏ∂∞ ÏïåÎ†§ÎìúÎ¶¥Í≤åÏöî.');
            }, 1000);
        }

        function toggleWeatherAlert() {
            addMessage('ÎÇ†Ïî® ÏïåÎ¶º ÏÑ§Ï†ï Î≥ÄÍ≤Ω', true);
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage('‚úÖ ÎÇ†Ïî® ÏïåÎ¶ºÏù¥ ÌôúÏÑ±ÌôîÎêòÏóàÏñ¥Ïöî!<br><br>ÎπÑÎÇò ÎààÏù¥ Ïò¨ Îïå ÎØ∏Î¶¨ ÏïåÎ†§ÎìúÎ¶¥Í≤åÏöî.');
            }, 1000);
        }

        function goBack() {
            window.location.href = 'new_final_integrated.html';
        }

        // Ï¥àÍ∏∞ Î©îÏãúÏßÄ
        setTimeout(() => {
            addMessage('ÏïàÎÖïÌïòÏÑ∏Ïöî! Ïä§ÎßàÌä∏ Ï∂úÌá¥Í∑º Í¥ÄÎ¶¨ ÏÑúÎπÑÏä§Ïóê Ïò§Ïã† Í±∏ ÌôòÏòÅÌï¥Ïöî! üòä<br><br>"Ï∂úÌá¥Í∑º ÏïåÎ†§Ï§ò"ÎùºÍ≥† ÎßêÏîÄÌï¥Ï£ºÏãúÎ©¥ ÏãúÏûëÌï†Í≤åÏöî!');
        }, 1000);
    </script>
</body>
</html>